{% extends 'base.html' %}
{% block content %}
    <div class="container">
        <h3>Тест "{{ progress.test.title }}"</h3>
        <h4>Количество вопросов: {{ progress.test.question_bim.count }}</h4>
        <h4>Результат:
            {% if progress.is_passed %}
                Сдано
            {% else %}
                Не сдано
            {% endif %}
        </h4>
        <h4>Верных ответов: {{ progress.correct_answers }} из {{ progress.user_progress.count }} ({{ progress.accuracy|floatformat:2 }})</h4>
        <a href="#" class="btn btn-primary">Далее</a>
        {% for question in questions %}
            <div class="card mt-3">
            <div class="card-body">
                <p class="lead">{{ question.title }}</p>
                {% for answer in question.answer_bim.all %}
                    <div class="form-check">
                        {% if answer.id in user_answers_id %}
                            <input disabled checked class="form-check-input answer-radio" type="radio" id="answer-{{ answer.id }}" name="question-{{ question.id }}" value="{{ answer.id }}">
                            {% if answer.is_correct %}
                                <label class="form-check-label text-success" for="answer-{{ answer.id }}">
                                    {{ answer.answer }}
                                </label>
                            {% else %}
                                <label class="form-check-label text-danger" for="answer-{{ answer.id }}">
                                    {{ answer.answer }}
                                </label>
                            {% endif %}
                        {% else %}
                            <input disabled class="form-check-input answer-radio" type="radio" id="answer-{{ answer.id }}" name="question-{{ question.id }}" value="{{ answer.id }}">
                            {% if answer.is_correct %}
                                <label class="form-check-label text-success" for="answer-{{ answer.id }}">
                                    <u>{{ answer.answer }}</u>
                                </label>
                            {% else %}
                                <label class="form-check-label" for="answer-{{ answer.id }}">
                                    {{ answer.answer }}
                                </label>
                            {% endif %}
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}